<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>
    <h:body>
        <ui:composition>

            <h:outputText value="#{loginBean.name}" />さん、ようこそ
            
            <form jsf:id="form">
                <button jsf:action="#{loginBean.logout()}" id="hiddenBtn" style="display:none">logout</button>
            </form>
            <p:commandButton value="Sign out" icon="fa fa-sign-out" onclick="signOut()" ></p:commandButton>
            <script>
                function onLoad() {
                    gapi.load('auth2', function() {
                        gapi.auth2.init();
                    })
                }
                function signOut() {
                    var auth2 = gapi.auth2.getAuthInstance();
                    auth2.signOut().then(function () {
                        console.log('User signed out');
                    })
                    document.getElementById('hiddenBtn').click();
                }
            </script>
        </ui:composition>
    </h:body>
</html>

